
## –ú—ã –∏–∑–±–∞–≤–∏–ª–∏—Å—å –æ—Ç Webpack –∏ —É—Å–∫–æ—Ä–∏–ª–∏ CI –≤ 5 —Ä–∞–∑ —Å Rsbuild

![img](prew.jpg)

Webpack ‚Äî —ç—Ç–æ –∫–∞–∫ —Å—Ç–∞—Ä—ã–π –¥–∏–∑–µ–ª—å–Ω—ã–π –¥–≤–∏–≥–∞—Ç–µ–ª—å: –≥—Ä–æ–º–æ–∑–¥–∫–∏–π, –º–µ–¥–ª–µ–Ω–Ω—ã–π –∏ —Ç—Ä–µ–±–æ–≤–∞—Ç–µ–ª—å–Ω—ã–π –∫ —Ä–µ—Å—É—Ä—Å–∞–º. –ü–æ–∫–∞ –¥—Ä—É–≥–∏–µ –ø–µ—Ä–µ—Ö–æ–¥—è—Ç –Ω–∞ —ç–ª–µ–∫—Ç—Ä–∏—á–∫–∏ (Vite), –ú–∏—Ö–∞–∏–ª –ü–µ—Ä—Ü–µ–≤ –Ω–∞—à—ë–ª –∫–æ–º–ø—Ä–æ–º–∏—Å—Å ‚Äî Rsbuild. –¢–µ–ø–µ—Ä—å –µ–≥–æ CI —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ 5 —Ä–∞–∑ –±—ã—Å—Ç—Ä–µ–µ, –∞ –±–∏–ª–¥—ã –Ω–µ –ø–∞–¥–∞—é—Ç –∏–∑-–∑–∞ –Ω–µ—Ö–≤–∞—Ç–∫–∏ –ø–∞–º—è—Ç–∏. –í —Å—Ç–∞—Ç—å–µ –æ–Ω —Ä–∞—Å—Å–∫–∞–∂–µ—Ç, –∫–∞–∫ –ø—Ä–æ—à–ª–∞ –º–∏–≥—Ä–∞—Ü–∏—è –∏ –∫–∞–∫ —ç—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ –µ–≥–æ –≤–∑–≥–ª—è–¥ –Ω–∞ —Å–±–æ—Ä–∫—É —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞.

![img](1.jpg)

–ù–µ–º–Ω–æ–≥–æ –¥–µ—Ç–∞–ª–µ–π –æ –º–æ—ë–º –ø—Ä–æ–µ–∫—Ç–µ, –¥–ª—è –∫–æ—Ç–æ—Ä–æ–≥–æ –≤—Å—ë —ç—Ç–æ –∏ –∑–∞—Ç–µ–≤–∞–ª–æ—Å—å. –í–ø–æ–ª–Ω–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ React, SASS, TypeScript, –∏ —Å–±–æ—Ä–∫–∞ —á–µ—Ä–µ–∑ Webpack + babel. –ù—É–∂–Ω–∞ –±—ã–ª–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –ª–µ–≥–∞—Å–∏ –±—Ä–∞—É–∑–µ—Ä–æ–≤, –Ω–∞–ø—Ä–∏–º–µ—Ä, Internet Explorer 11.

–û—Å–Ω–æ–≤–Ω—ã–º–∏ –ø—Ä–∏—á–∏–Ω–∞–º–∏ –º–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å Webpack —Å—Ç–∞–ª–∏:
- **–ë–æ–ª—å—à–æ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏ –≤ CI.** –ü—Ä–æ—Ü–µ—Å—Å —Å–±–æ—Ä–∫–∏ –Ω–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ (–∞ –ø—Ä–æ–µ–∫—Ç –±—ã–ª –Ω–µ–º–∞–ª–µ–Ω—å–∫–∏–π) —Å—ä–µ–¥–∞–ª –±–æ–ª—å—à–µ 8GB –æ–ø–µ—Ä–∞—Ç–∏–≤–∫–∏ –≤ Gitlab runner. –ü–∞—Ä–∞–º–µ—Ç—Ä `--max-old-space-size=8182` –≤ NodeJS. –°–±–æ—Ä–∫–∞ –∏–Ω–æ–≥–¥–∞ –ø–∞–¥–∞–ª–∞ —Å –æ—à–∏–±–∫–æ–π heap out of memory. –ö–æ–º–∞–Ω–¥–∞ DevOps –Ω–∞—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–ª–∞ –Ω–µ —É–≤–µ–ª–∏—á–∏–≤–∞—Ç—å –ø–∞–º—è—Ç—å –¥–ª—è —Å–±–æ—Ä–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞ —Ç–∞–∫ –∫–∞–∫ runner –±—ã–ª –æ–±—â–∏–º —Å –±–µ–∫–µ–Ω–¥–æ–º.
- **–°–±–æ—Ä–∫–∞ –≤ CI –±—ã–ª–∞ –¥–æ–ª–≥–æ–π** ‚Äî 8 –º–∏–Ω—É—Ç –≤ —Å—Ä–µ–¥–Ω–µ–º –Ω–∞ –Ω–∞—à–µ–º –ø—Ä–æ–µ–∫—Ç–µ. –ê —Ç–∞–∫ –∫–∞–∫ —É –Ω–∞—Å –ø—Ä–æ–µ–∫—Ç –±—ã–ª –º–æ–Ω–æ—Ä–µ–ø–æ–π, —Å–æ–±–∏—Ä–∞–ª–æ—Å—å –±–æ–ª—å—à–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –∑–∞ —Ä–∞–∑. –ß–∞—Å—Ç—å –∏–∑ –Ω–∏—Ö –±—ã–ª–∏ React-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º–∏ —Å Webpack –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π. –û–±—â–∏–π –ø–∞–π–ø–ª–∞–π–Ω —Å–æ—Å—Ç–∞–≤–ª—è–ª –ø–æ—Ä—è–¥–∫–∞ 35 –º–∏–Ω—É—Ç. –ò –Ω–µ —Ç–æ–ª—å–∫–æ —è —Å —ç—Ç–∏–º —Å—Ç–∞–ª–∫–∏–≤–∞–ª—Å—è, –≤–æ—Ç –Ω–∞–ø—Ä–∏–º–µ—Ä [issue](https://gitlab.com/gitlab-org/quality/quality-engineering/team-tasks/-/issues/1346) –æ—Ç –∫–æ–º–∞–Ω–¥—ã gitlab, –≤ –∫–æ—Ç–æ—Ä–æ–º –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –≤—ã—Ä–æ—Å–ª–æ –ø–æ—Å–ª–µ –∞–ø–≥—Ä–µ–π–¥–∞ –Ω–∞ webpack 5. –£ –Ω–∞—Å –Ω–∞ –ø—Ä–æ–µ–∫—Ç–µ —Ç–æ–∂–µ —Å—Ç–æ—è–ª webpack5.
- **–°–ª–æ–∂–Ω–æ—Å—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.** Webpack —Ç—Ä–µ–±—É–µ—Ç —Ç–æ–Ω–∫–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏, –º–Ω–æ–≥–æ –ø–ª–∞–≥–∏–Ω–æ–≤, –¥–ª–∏–Ω–Ω—ã–π –∫–æ–Ω—Ñ–∏–≥.
- **–°–∫–æ—Ä–æ—Å—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏.** –î–∞–∂–µ —Å –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º Webpack —É—Å—Ç—É–ø–∞–µ—Ç –≤ —Å–∫–æ—Ä–æ—Å—Ç–∏ –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∏.

–ú—ã –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–ª–∏ —Å–∏—Ç—É–∞—Ü–∏—é –∏ –≤ —Ä–∞–º–∫–∞—Ö –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –Ω–∞—à–µ–≥–æ CI —Ä–µ—à–∏–ª–∏ —É–¥–µ–ª–∏—Ç—å –≤—Ä–µ–º—è –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—é –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤ Webpack. Webpack ‚Äî —ç—Ç–æ –∫–∞–∫ —Å—Ç–∞—Ä—ã–π –≥—Ä—É–∑–æ–≤–∏–∫: –≤–µ–∑—ë—Ç, –Ω–æ —Å–ª–∏—à–∫–æ–º –º–µ–¥–ª–µ–Ω–Ω–æ –∏ –¥–æ—Ä–æ–≥–æ. –ú—ã —Å—Ç—Ä–∞–¥–∞–ª–∏ –æ—Ç –µ–≥–æ –≥—Ä–æ–º–æ–∑–¥–∫–æ—Å—Ç–∏, –¥–æ–ª–≥–∏—Ö –±–∏–ª–¥–æ–≤, –æ—à–∏–±–æ–∫ –∏–∑-–∑–∞ –ø–∞–º—è—Ç–∏. –ù–∞–º –Ω—É–∂–µ–Ω –±—ã–ª –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ —Ç–æ–ª—å–∫–æ —É—Å–∫–æ—Ä–∏—Ç CI/CD, –Ω–æ –∏ –æ–±–ª–µ–≥—á–∏—Ç –∂–∏–∑–Ω—å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º. –≠—Ç–∞ –∑–∞–¥–∞—á–∞ –≤—ã–ø–∞–ª–∞ –º–Ω–µ.

### –í—ã–±–æ—Ä —Ä–µ—à–µ–Ω–∏—è

![img](2.jpg)

–ü–µ—Ä–≤—ã–º –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–º —Å—Ç–∞–ª Vite, —Ç–∞–∫ –∫–∞–∫ —á–∞—Å—Ç—å –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö –ø–∞–∫–µ—Ç–æ–≤-–±–∏–±–ª–∏–æ—Ç–µ–∫ —É–∂–µ –µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞. –ù–æ Vite –æ–∫–∞–∑–∞–ª—Å—è –Ω–µ –ø–∞–Ω–∞—Ü–µ–µ–π: –±–æ–ª—å—à–æ–≥–æ –ø—Ä–∏—Ä–æ—Å—Ç–∞ –ø–æ —Å–∫–æ—Ä–æ—Å—Ç–∏ —Å–±–æ—Ä–∫–∏ –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å Webpack —è –Ω–µ –ø–æ–ª—É—á–∏–ª. –†–∞–∑–Ω–∏—Ü–∞ —Å–æ—Å—Ç–∞–≤–∏–ª–∞ –æ–∫–æ–ª–æ –ø–æ–ª—É—Ç–æ—Ä–∞ –º–∏–Ω—É—Ç ‚Äî –æ–∫–æ–ª–æ —à–µ—Å—Ç–∏ —Å –ø–æ–ª–æ–≤–∏–Ω–æ–π –º–∏–Ω—É—Ç –≤–º–µ—Å—Ç–æ –≤–æ—Å—å–º–∏. –î–∞ –∏ –ø–∞–º—è—Ç–∏ –æ–Ω –ø–æ—Ç—Ä–µ–±–ª—è–ª –Ω–µ –Ω–∞–º–Ω–æ–≥–æ –º–µ–Ω—å—à–µ ‚Äî –æ–∫–æ–ª–æ 6-7 GB. –ë—ã—Å—Ç—Ä–æ —Å—Ç–∞–ª–æ –ø–æ–Ω—è—Ç–Ω–æ, —á—Ç–æ —Å —Ä–æ—Å—Ç–æ–º –ø—Ä–æ–µ–∫—Ç–∞ –º—ã —Å–Ω–æ–≤–∞ —É–ø—Ä—ë–º—Å—è –≤ –ª–∏–º–∏—Ç 8GB  ‚Äî –ø–æ–º–µ–Ω—è–µ–º ¬´—à–∏–ª–æ –Ω–∞ –º—ã–ª–æ¬ª. –¢–∞–∫–∂–µ –ø—Ä–æ—Ü–µ—Å—Å –ø–µ—Ä–µ—Ö–æ–¥–∞ –∑–∞—Ç—Ä—É–¥–Ω—è–ª–æ —Ç–æ, —á—Ç–æ —á–∞—Å—Ç—å –ø–ª–∞–≥–∏–Ω–æ–≤, –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–æ–≤–∞–≤—à–∏—Ö –≤ –Ω–∞—à–µ–º –ø—Ä–æ–µ–∫—Ç–µ, –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –≤ Vite. –ö–æ–Ω–µ—á–Ω–æ, –±—ã–ª–∏ –∞–Ω–∞–ª–æ–≥–∏, –Ω–æ –º–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ –Ω–∏—Ö —Ç—Ä–µ–±–æ–≤–∞–ª–∞ –ø—Ä–∞–≤–æ–∫ –≤ —Å–∞–º–æ–π —Å–±–æ—Ä–∫–µ. –ù–µ –±—ã–ª–æ —É Vite –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ Module Federation 2.0, –∫–æ—Ç–æ—Ä–∞—è –≤–∞–∂–Ω–∞ –¥–ª—è –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤.

–ê –µ—â—ë –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ —Å–±–æ—Ä–∫–∏ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Webpack –∏ Vite –≤ GitLab CI/CD –Ω–µ—Ä–µ–¥–∫–æ –≤–æ–∑–Ω–∏–∫–∞—é—Ç –æ—à–∏–±–∫–∏, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –ø—Ä–µ–≤—ã—à–µ–Ω–∏–µ–º –æ–±—ä—ë–º–∞ –ø–∞–º—è—Ç–∏ –∫—É—á–∏ JavaScript. –¢–∞–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Ä–µ–≥—É–ª—è—Ä–Ω–æ –æ–±—Å—É–∂–¥–∞—é—Ç—Å—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º–∏:

**Webpack.** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–æ–æ–±—â–∞—é—Ç –æ —Å–±–æ—è—Ö —Å–±–æ—Ä–∫–∏ –≤ GitLab CI/CD –∏–∑-–∑–∞ –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–∞ –ø–∞–º—è—Ç–∏ –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ Webpack. –í –æ–¥–Ω–æ–º –∏–∑ –æ–±—Å—É–∂–¥–µ–Ω–∏–π –Ω–∞ GitLab –æ–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è —Å–∏—Ç—É–∞—Ü–∏—è, –∫–æ–≥–¥–∞ –ø—Ä–æ—Ü–µ—Å—Å —Å–±–æ—Ä–∫–∏ React-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å –ø–æ–º–æ—â—å—é Webpack –∑–∞–≤–µ—Ä—à–∞–ª—Å—è —Å –æ—à–∏–±–∫–æ–π ¬´JavaScript heap out of memory¬ª.
[–ò—Å—Ç–æ—á–Ω–∏–∫](https://gitlab.com/gitlab-org/quality/quality-engineering/team-tasks/-/issues/1346)

**Vite.** –°—Ö–æ–∂–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –Ω–∞–±–ª—é–¥–∞—é—Ç—Å—è –∏ –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ Vite. –í –æ–±—Å—É–∂–¥–µ–Ω–∏–∏ –Ω–∞ GitHub —É–ø–æ–º–∏–Ω–∞–µ—Ç—Å—è, —á—Ç–æ –ø—Ä–∏ –¥–ª–∏—Ç–µ–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç–µ Vite –º–æ–∂–µ—Ç –≤–æ–∑–Ω–∏–∫–∞—Ç—å –æ—à–∏–±–∫–∞ ¬´Heap out of memory¬ª ‚Äî [–∏—Å—Ç–æ—á–Ω–∏–∫](https://github.com/vitejs/vite/issues/2433)

–î–ª—è —Ä–µ—à–µ–Ω–∏—è –ø–æ–¥–æ–±–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —É–≤–µ–ª–∏—á–∏—Ç—å –ª–∏–º–∏—Ç –ø–∞–º—è—Ç–∏ –¥–ª—è Node.js, –∏—Å–ø–æ–ª—å–∑—É—è —Ñ–ª–∞–≥ `--max-old-space-size.` –ù–∞–ø—Ä–∏–º–µ—Ä, –∑–∞–ø—É—Å–∫ –∫–æ–º–∞–Ω–¥—ã —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º `--max-old-space-size=8192` —É–≤–µ–ª–∏—á–∏—Ç –¥–æ—Å—Ç—É–ø–Ω—É—é –ø–∞–º—è—Ç—å –¥–æ 8 –ì–ë. –û–¥–Ω–∞–∫–æ —Å–ª–µ–¥—É–µ—Ç —É—á–∏—Ç—ã–≤–∞—Ç—å, —á—Ç–æ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ –ª–∏–º–∏—Ç–∞ –ø–∞–º—è—Ç–∏ –Ω–µ –≤—Å–µ–≥–¥–∞ —Ä–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É, –æ—Å–æ–±–µ–Ω–Ω–æ –≤ —Å—Ä–µ–¥–∞—Ö —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–º–∏ —Ä–µ—Å—É—Ä—Å–∞–º–∏, —Ç–∞–∫–∏—Ö –∫–∞–∫ CI/CD. –í —Ç–∞–∫–∏—Ö —Å–ª—É—á–∞—è—Ö –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Å–±–æ—Ä—â–∏–∫–∞ –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤.

–ò —Ç—É—Ç —è –Ω–∞—Ç–∫–Ω—É–ª—Å—è –Ω–∞ Rsbuild, –∫–æ—Ç–æ—Ä—ã–π –æ–±–µ—â–∞–ª —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å Webpack –ø–æ API.
–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ Rsbuild –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å Webpack:

- –ù–∞–º–Ω–æ–≥–æ –±—ã—Å—Ç—Ä–µ–µ –∏–∑-–∑–∞ —Ç–æ–≥–æ, —á—Ç–æ –ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º Rust –≤–º–µ—Å—Ç–æ JavaScript. –≠—Ç–æ –∑–∞–º–µ—Ç–Ω–æ –∫–∞–∫ –ø—Ä–∏ HMR, —Ç–∞–∫ –∏ –ø—Ä–∏ build –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ.

- –ü—Ä–æ—â–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è, –º–Ω–æ–≥–æ –≥–æ—Ç–æ–≤—ã—Ö –ø–ª–∞–≥–∏–Ω–æ–≤ –¥–ª—è –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö —Å–µ—Ç–∞–ø–æ–≤ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–≤. –ù–∞–ø—Ä–∏–º–µ—Ä, –æ—Ç–¥–µ–ª—å–Ω—ã–µ –ø–ª–∞–≥–∏–Ω—ã –¥–ª—è SASS/LESS –∏ –¥–ª—è React/Vue/Svelte. 

[SASS](https://rsbuild.dev/plugins/list/plugin-sass)

[LESS](https://rsbuild.dev/plugins/list/plugin-less)

[Svelt](https://rsbuild.dev/plugins/list/plugin-svelte)

[React](https://rsbuild.dev/plugins/list/plugin-react)

[Vue](https://rsbuild.dev/plugins/list/plugin-vue)

–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ Rsbuild –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å Vite:

- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ API –ø–ª–∞–≥–∏–Ω–æ–≤ Webpack. –ß–∞—Å—Ç—å –ø–ª–∞–≥–∏–Ω–æ–≤ Webpack –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∏–∑ –∫–æ—Ä–æ–±–∫–∏, —Ç–æ–≥–¥–∞ –∫–∞–∫ –≤ —Å–ª—É—á–∞–µ —Å Vite –ø—Ä–∏–¥–µ—Ç—Å—è –∏—Å–∫–∞—Ç—å –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã –¥–ª—è rollup. –ê –¥–ª—è –¥—Ä—É–≥–æ–π —á–∞—Å—Ç–∏ –µ—Å—Ç—å –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã ‚Äî –Ω–∞–ø—Ä–∏–º–µ—Ä –¥–ª—è [extract CSS](https://rspack.dev/plugins/rspack/css-extract-rspack-plugin)
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Module Federation 2.0. –í –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –≤ Vite –æ–Ω–∞ –ø–æ–∫–∞ [–æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç](https://github.com/vitejs/vite/issues/16635). –ù–∞–º –æ–Ω–∞ –±—ã–ª–∞ –Ω–µ –Ω—É–∂–Ω–∞, –Ω–æ —Ç–µ–º –Ω–µ –º–µ–Ω–µ–µ —ç—Ç–æ –≤–µ—Å–æ–º—ã–π –ø–ª—é—Å –¥–ª—è –º–Ω–æ–≥–∏—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤.
- –ë—ã—Å—Ç—Ä–µ–µ production —Å–±–æ—Ä–∫–∞, —Ç–∞–∫ –∫–∞–∫ Vite –≤—Å—ë –µ—â—ë –ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Rollup, –Ω–∞–ø–∏—Å–∞–Ω–Ω—ã–π –Ω–∞ JS. –û–Ω, –ø–æ–Ω—è—Ç–Ω–æ–µ –¥–µ–ª–æ, —É—Å—Ç—É–ø–∞–µ—Ç –≤ —ç—Ç–æ–º Rust, –æ–¥–Ω–∞–∫–æ —ç—Ç–æ—Ç –ø—É–Ω–∫—Ç –º–æ–∂–µ—Ç —É—Ç—Ä–∞—Ç–∏—Ç—å –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å –ø–æ—Å–ª–µ [–≤—ã–ø—É—Å–∫–∞ Rolldown](https://github.com/rolldown/rolldown/discussions/153).

![img](3.png)


### –ö–∞–∫ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –º–∏–≥—Ä–∞—Ü–∏—è —Å Webpack –Ω–∞ Rsbuild

–ò–∑–Ω–∞—á–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ñ–∏–≥ Webpack –±—ã–ª –ø—Ä–∏–º–µ—Ä–Ω–æ —Ç–∞–∫–∏–º:

```js
const config = {
    mode: process.env.NODE_ENV || 'development',
    devServer: {
        static: [
            path.join(__dirname, 'public'),
            path.join(__dirname, 'src'),
            path.join(__dirname, '..', '..', 'node_modules', '@my-monorepo', 'static-package', 'assets'),
        ],
    },
    name: 'main',
    devtool: shouldUseSourceMaps ? 'source-map' : false,
    entry: {
        // That one of for material-ui + ie11, current polyfilling seems to be breaking that combination
        // https://github.com/mui-org/material-ui/issues/17789
        polyfill: 'core-js/es/object',
        main: ENTRY_POINT,
        other: '@my-monorepo-component/main.js',
        branding: glob.sync('./src/styles/branding/**/*.scss'),
    },
    output: {
        path: __dirname + '/build',
    },
    optimization: {
        mergeDuplicateChunks: false,
        splitChunks: {
            chunks: 'async',
        },
        minimizer: [
            new TerserPlugin({
                minify: TerserPlugin.swcMinify,
                parallel: !process.env.CI,
                terserOptions: {
                    mangle: {
                        keep_fnames: true,
                    },
                },
            }),
        ],
    },
    module: {
        strictExportPresence: true,
        rules: [
            {
                test: /\.(js|cjs|mjs|jsx|ts|tsx)$/,
                include: [
                    path.resolve('./src'),
                    ...(!IS_DEV
                        ? [
                            // Some of the dependencies are not ie-friendly, so we need to transpile them
                            path.resolve(require.resolve('@svgdotjs/svg.js'), '..'),
                            path.resolve(require.resolve('@tanstack/match-sorter-utils'), '..'),
                            path.resolve(require.resolve('reselect'), '..'),
                            // ... —Ç—É—Ç –±—ã–ª–æ –≤–µ—Å—å–º–∞ –º–Ω–æ–≥–æ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
                        ]
                        : []),
                ],
                use: [
                    {
                        loader: 'babel-loader',
                        options: {
                            cacheDirectory: true,
                            configFile: path.resolve('babel.config.js'),
                        },
                    },
                ],
            },
            {
                test: /\.(js|cjs|mjs|jsx|ts|tsx)$/,
                include: [
                    ...(!IS_DEV
                        ? [
                            path.resolve(require.resolve('@tanstack/match-sorter-utils'), '..'),
                            path.resolve(require.resolve('@tanstack/react-table'), '..'),
                            // ... —Ç—É—Ç –±—ã–ª–æ –≤–µ—Å—å–º–∞ –º–Ω–æ–≥–æ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
                        ]
                        : []),
                ],
                use: [
                    {
                        loader: 'babel-loader',
                        options: {
                            cacheDirectory: true,
                            plugins: ['@babel/plugin-transform-modules-commonjs'],
                        },
                    },
                ],
            },
            ...extractCSSRules,
            {
                test: /\.(png?|svg)$/,
                use: [
                    {
                        loader: 'file-loader',
                        options: {
                            name: 'images/[name].[ext]',
                        },
                    },
                ],
            },
        ],
        unknownContextCritical: false,
    },
    plugins: [
        new MiniCssExtractPlugin({
            filename: (chunkData) =>
                chunkData.chunk.name === 'branding'
                    ? cssStaticFilenameTemplate
                    : cssFilenameTemplate,
        }),
        new webpack.DefinePlugin({
            'process.env': Object.assign({}, getDotEnv(), {
                // ... –¢—É—Ç –±—ã–ª–æ –ø–æ–ª–Ω–æ env
            }),
        }),
        new HtmlWebpackPlugin({
            baseHref: getBaseHref(env === 'production'),
            scriptLoading: 'blocking',
            template: path.join(__dirname, 'public/index.html'),
            chunks: ['polyfill', 'main'],
            IS_DEV,
        }),
        new webpack.LoaderOptionsPlugin({
            minimize: true,
        }),
        getSentryWebpackPlugin(), // –¢—É—Ç –ø—Ä–æ—Å—Ç–æ –±—ã–ª–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è sentry
    ],
};

module.exports = config;

```
**–≠—Ç–∞–ø 1. –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ Rsbuild**

–ü–æ–ø—Ä–æ–±—É—é –≤–æ—Å—Å–æ–∑–¥–∞—Ç—å —Ç–æ, –∫–∞–∫ —è –ø–µ—Ä–µ—Ö–æ–¥–∏–ª –∫ —Ñ–∏–Ω–∞–ª—å–Ω–æ–º—É –∫–æ–Ω—Ñ–∏–≥—É –Ω–∞ Rsbuild. –ù–∞—á–∞–ª —Å –ø—Ä–æ—Å—Ç–æ–≥–æ template –¥–ª—è React:

```ts
//rsbuild.config.ts

import { defineConfig } from '@rsbuild/core';
import { pluginReact } from '@rsbuild/plugin-react';

export default defineConfig({
  plugins: [pluginReact()],
});

```
–í –∫–æ–Ω—Ü–µ –ø—Ä–æ–≤–µ—Ä–∏–ª, —á—Ç–æ —Å–±–æ—Ä–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç.

**–≠—Ç–∞–ø 2. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö entry points.**

–ù–∞–º –±—ã–ª–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ entry, –¥–æ–±–∞–≤–ª—è–µ–º –∏—Ö:

```ts
//rsbuild.config.ts

export default defineConfig({
  source: {
    entry: {
      polyfill: 'core-js/es/object',
      main: ENTRY_POINT,
    },
  },
  plugins: [
    pluginReact(),
    pluginSass()
  ],
});
```
–¢–µ–ø–µ—Ä—å –±–∏–ª–¥ —Å–æ–±–∏—Ä–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ç–æ—á–µ–∫ –≤—Ö–æ–¥–∞, –∫–∞–∫ –≤ Webpack.

**–≠—Ç–∞–ø 3. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ SASS**

–î–æ–±–∞–≤–ª—è–µ–º –ø–æ–¥–¥–µ—Ä–∂–∫—É SASS:
```ts
import { pluginSass } from '@rsbuild/plugin-sass';
//... –î—Ä—É–≥–∏–µ –∏–º–ø–æ—Ä—Ç—ã —Å–∫—Ä—ã—Ç—ã

export default defineConfig({
  source: {
    entry: {
      polyfill: 'core-js/es/object',
      main: ENTRY_POINT,
    },
  },
  plugins: [
    pluginReact(),
    pluginSass()
  ],
});
```
–°—Ç–∏–ª—å –ø—Ä–æ–µ–∫—Ç–∞ –Ω–µ –ª–æ–º–∞–µ—Ç—Å—è.

**–≠—Ç–∞–ø 4. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–ª–∏–∞—Å–æ–≤ –¥–ª—è –º–æ–Ω–æ—Ä–µ–ø—ã**

–ü—Ä–æ–±–ª–µ–º—É —Å alias –ø—Ä–∏—à–ª–æ—Å—å —Ä–µ—à–∞—Ç—å –≤—Ä—É—á–Ω—É—é, –ø–æ—Ç–æ–º—É —á—Ç–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –Ω–µ –¥–∞–≤–∞–ª–∞ –Ω—É–∂–Ω—ã—Ö –ø—Ä–∏–º–µ—Ä–æ–≤. –ù–∞ —Ç–µ–∫—É—â–µ–º —ç—Ç–∞–ø–µ –ø—Ä–æ–µ–∫—Ç, —Ä–∞–∑—É–º–µ–µ—Ç—Å—è, –Ω–µ –∑–∞–ø—É—Å–∫–∞–ª—Å—è –ª–æ–∫–∞–ª—å–Ω–æ –∏ –Ω–µ —Å–æ–±–∏—Ä–∞–ª—Å—è —á–µ—Ä–µ–∑ Rsbuild, —Ç–∞–∫ –∫–∞–∫ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –±—ã–ª–æ –ø—Ä–æ–ø–∏—Å–∞—Ç—å –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ alias –≤ .sass —Ñ–∞–π–ª–∞—Ö –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö –ø–∞–∫–µ—Ç–æ–≤. 

–¢–æ –µ—Å—Ç—å –∏–Ω–æ–≥–¥–∞ –±—ã–ª –≤–æ—Ç —Ç–∞–∫–æ–π –∏–º–ø–æ—Ä—Ç:
```sass
// main.sass
// –≤–æ—Ç —ç—Ç–æ—Ç –∏–º–ø–æ—Ä—Ç –Ω–µ —Ä–∞–∑–æ–ª–≤–∏–ª—Å—è –Ω–æ—Ä–º–∞–ª—å–Ω–æ
@use '@monorepo/ui/dist/my-ui'; 

...
```
–î–ª—è —ç—Ç–æ–≥–æ –≤ Rsbuild –µ—Å—Ç—å —É–¥–æ–±–Ω—ã–π API –¥–ª—è alias, –¥–æ–±–∞–≤–ª—è–µ–º:
```ts
export default defineConfig({
  source: {
    entry: {
      polyfill: 'core-js/es/object',
      main: ENTRY_POINT,
    },
    alias: {
      '@my-monorepo/ui/dist/main': path.resolve(
        __dirname,
        '../../node_modules/@my-monorepo/ui/dist/main.scss',
        //... –¥—Ä—É–≥–∏–µ –∏–º–ø–æ—Ä—Ç—ã –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω–æ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∑–∞—Ä–µ–∑–æ–ª–≤–∏—Ç—å –≤ –º–æ–Ω–æ—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
    ),
    }
  },
  plugins: [pluginReact(), pluginSass()],
});
```
–î–∞–ª–µ–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–¥–µ–ª–∞—Ç—å –∞–Ω–∞–ª–æ–≥ process.env –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ, –∫–æ—Ç–æ—Ä—ã–π –∑–∞–¥–∞–≤–∞–ª—Å—è —á–µ—Ä–µ–∑ DefinePlugin –≤ Webpack. –¢–µ–ø–µ—Ä—å –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –∏–º–ø–æ—Ä—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.

–¢—É—Ç —Å–ª–µ–¥—É–µ—Ç —Å–¥–µ–ª–∞—Ç—å –æ—Ç—Å—Ç—É–ø–ª–µ–Ω–∏–µ –∏ —Ä–∞—Å—Å–∫–∞–∑–∞—Ç—å, —á—Ç–æ —Å–∞–º Rsbuild ‚Äî —ç—Ç–æ –Ω–µ —Å–±–æ—Ä—â–∏–∫, –∞, –ø–æ —Å—É—Ç–∏, –æ–±—ë—Ä—Ç–∫–∞ –∏ –∫—É—á–∞ –ø–ª–∞–≥–∏–Ω–æ–≤ –Ω–∞–¥ [Rspack](https://github.com/web-infra-dev/rspack). –ò–º–µ–Ω–Ω–æ Rspack –ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º –∏ –¥–µ–ª–∞–µ—Ç –≤—Å—é —Ä–∞–±–æ—Ç—É —Å–±–æ—Ä—â–∏–∫–∞, –∞ —Ç–∞–∫–∂–µ —É –Ω–µ–≥–æ –µ—Å—Ç—å API –ª–æ–∞–¥–µ—Ä—ã –∏ –ø–ª–∞–≥–∏–Ω—ã, —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–µ —Å Webpack. 

–î–µ–ª–æ –≤ —Ç–æ–º, —á—Ç–æ Rspack —Å—Ç—Ä–µ–º–∏—Ç—Å—è –∫ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å —ç–∫–æ—Å–∏—Å—Ç–µ–º–æ–π Webpack. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–Ω–æ–≥–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–ª–∞–≥–∏–Ω—ã Webpack –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ –≤ Rspack. –î–ª—è –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –ø–ª–∞–≥–∏–Ω–æ–≤ Rspack –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã. –í–æ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–∏–º–µ—Ä–æ–≤:

- **copy-webpack-plugin:** –í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –ø–ª–∞–≥–∏–Ω–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –≤ Rspack CopyRspackPlugin. –ê –≤ rsbuild —ç—Ç–æ –¥–µ–ª–∞–µ—Ç—Å—è –ø—É—Ç–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–æ–Ω—Ñ–∏–≥–∞ output.copy.
- **mini-css-extract-plugin:** –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ CssExtractRspackPlugin, –∫–æ—Ç–æ—Ä—ã–π –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –≤ Rspack. –ú–Ω–µ –¥–∞–∂–µ –Ω–µ –ø–æ—Ç—Ä–µ–±–æ–≤–∞–ª–æ—Å—å –µ–≥–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –≤ Rsbuild, —Ç–∞–∫ –∫–∞–∫ —Ä–µ—à–µ–Ω–∏–µ –∏–∑ –∫–æ—Ä–æ–±–∫–∏ —É—Å—Ç—Ä–∞–∏–≤–∞–ª–æ –∏ —Ç–∞–∫.
- **tsconfig-paths-webpack-plugin:** –í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –ø–ª–∞–≥–∏–Ω–∞ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–ø—Ü–∏—é resolve.tsConfig –≤ Rspack.
- **@sentry/webpack-plugin:** –°–æ–≤–º–µ—Å—Ç–∏–º —Å Rspack –Ω–∞—á–∏–Ω–∞—è —Å –≤–µ—Ä—Å–∏–∏ v1.20.1.
- **@vanilla-extract/webpack-plugin:** –ü–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–≤–º–µ—Å—Ç–∏–º —Å Rspack.
- [**fork-ts-checker-webpack-plugin:**](https://github.com/TypeStrong/fork-ts-checker-webpack-plugin) –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ Rspack -> [https://github.com/rspack-contrib/ts-checker-rspack-plugin](https://github.com/rspack-contrib/ts-checker-rspack-plugin)
- **css-minimizer-webpack-plugin:** –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ Rspack  -> [https://rspack.dev/plugins/rspack/lightning-css-minimizer-rspack-plugin](https://rspack.dev/plugins/rspack/lightning-css-minimizer-rspack-plugin)

–î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –±–æ–ª–µ–µ –ø–æ–¥—Ä–æ–±–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ –ø–ª–∞–≥–∏–Ω–æ–≤ —Å Rspack —Ä–µ–∫–æ–º–µ–Ω–¥—É—é –æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è —Å [–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π](https://rspack.dev/guide/compatibility/plugin?utm_source=chatgpt.com).

**–≠—Ç–∞–ø 5. –î–æ–±–∞–≤–ª—è–µ–º –ø–ª–∞–≥–∏–Ω—ã**

–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –ø—Ä–∏ –º–∏–≥—Ä–∞—Ü–∏–∏ —Å Webpack –Ω–∞ Rspack –º–æ–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –±–æ–ª—å—à—É—é —á–∞—Å—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏, –º–∏–Ω–∏–º–∏–∑–∏—Ä—É—è –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –∏—Å–∫–∞—Ç—å –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è. Rsbuild —Ä–µ–∞–ª—å–Ω–æ —Å—ç–∫–æ–Ω–æ–º–∏–ª —á–∞—Å—ã —Ä–∞–±–æ—Ç—ã, –Ω–æ –ø—Ä–∏—à–ª–æ—Å—å –ø–æ–ø–æ—Ç–µ—Ç—å, —á—Ç–æ–±—ã –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–ª–∞–≥–∏–Ω—ã

–°–æ–±—Å—Ç–≤–µ–Ω–Ω–æ, –Ω—É–∂–Ω—ã–π –Ω–∞–º –ø–ª–∞–≥–∏–Ω DefinePlugin –∫–∞–∫ —Ä–∞–∑ –∏ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ Rspack, –¥–æ–±–∞–≤–ª—è–µ–º –µ–≥–æ.

```ts
export default defineConfig({
  source: {
    entry: {
      polyfill: 'core-js/es/object',
      main: ENTRY_POINT,
    },
    alias: {
      '@my-monorepo/ui/dist/main': path.resolve(
        __dirname,
        '../../node_modules/@my-monorepo/ui/dist/main.scss',
        //... –¥—Ä—É–≥–∏–µ –∏–º–ø–æ—Ä—Ç—ã –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω–æ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∑–∞—Ä–µ–∑–æ–ª–≤–∏—Ç—å –≤ –º–æ–Ω–æ—Ä–µ–ø–µ
    ),
    }
  },
tools: {
        rspack(config, { appendPlugins, isDev, rspack }) {
            appendPlugins([
                new rspack.DefinePlugin({
                    'process.env': Object.assign({}, getDotEnv(), {
                        //... —Ç—É—Ç –∫—É—á–∞ env
                    }),
                }),
            ]);

            return config;
        },
  // –¢–∞–∫ –∂–µ –¥–æ–±–∞–≤–ª—è–µ–º –≤–æ—Ç —ç—Ç–æ, —Ç–∞–∫ –∫–∞–∫ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 
  // rsbuild –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø–æ–¥ –∫–∞–∂–¥—ã–π entry html —Ñ–∞–π–ª, 
  // –∞ –Ω–∞–º –æ–Ω –Ω—É–∂–µ–Ω –Ω–µ –¥–ª—è –≤—Å–µ—Ö entry
        htmlPlugin: false, 
    },
  plugins: [pluginReact(), pluginSass()],
});
```
–î–∞–ª–µ–µ –¥–æ–±–∞–≤–ª—è–µ–º `HtmlRspackPlugin` —á—Ç–æ–±—ã —Å–º–∞—Ç—á–∏—Ç—å html, –∫–æ—Ç–æ—Ä—ã–π –Ω–∞–º –≤—ã–¥–∞–≤–∞–ª Webpack, –∏ –¥–æ–±–∞–≤–ª—è–µ–º –ø–ª–∞–≥–∏–Ω –¥–ª—è [sentry](https://www.npmjs.com/package/@sentry/webpack-plugin).
```ts
export default defineConfig({
  source: {
    entry: {
      polyfill: 'core-js/es/object',
      main: ENTRY_POINT,
    },
    alias: {
      '@my-monorepo/ui/dist/main': path.resolve(
        __dirname,
        '../../node_modules/@my-monorepo/ui/dist/main.scss',
        //... –¥—Ä—É–≥–∏–µ –∏–º–ø–æ—Ä—Ç—ã –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω–æ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∑–∞—Ä–µ–∑–æ–ª–≤–∏—Ç—å –≤ –º–æ–Ω–æ—Ä–µ–ø–µ
    ),
    }
  },
tools: {
        rspack(config, { appendPlugins, isDev, rspack }) {
            appendPlugins([
                new rspack.DefinePlugin({
                    'process.env': Object.assign({}, getDotEnv(), {
                        //... —Ç—É—Ç –∫—É—á–∞ env
                    }),
                }),
               new rspack.HtmlRspackPlugin({
                    template: path.join(__dirname, 'public', 'index.html'),
                    scriptLoading: 'blocking',
                    chunks: ['polyfill', 'main'],
                }),
              // –ö –º–æ–µ–º—É —É–¥–∏–≤–ª–µ–Ω–∏—é sentry-webpack-plugin
              //–í—Å—Ç–∞–ª –∫–∞–∫ –Ω–∞–¥–æ —Å –ø–µ—Ä–≤–æ–≥–æ —Ä–∞–∑–∞
              getSentryWebpackPlugin(), 
            ]);

            return config;
        },
        htmlPlugin: false, 
    },
  plugins: [pluginReact(), pluginSass()],
});
```
–ù–∞ —ç—Ç–æ–º —ç—Ç–∞–ø–µ —è —É–∂–µ –ø–æ–ª—É—á–∏–ª —Ä–∞–±–æ—á—É—é –≤–µ—Ä—Å–∏—é, –Ω–æ –≤—Å—ë –µ—â—ë –æ—Å—Ç–∞–≤–∞–ª–∏—Å—å –ø—Ä–æ–±–ª–µ–º—ã —Å–æ —Å—Ç–∏–ª—è–º–∏. –î–µ–ª–æ –≤ —Ç–æ–º, —á—Ç–æ UI –∞–≤—Ç–æ—Ç–µ—Å—Ç—ã –æ—Ç QA –æ—Ç–¥–µ–ª–∞ –æ–ø–∏—Ä–∞–ª–∏—Å—å –Ω–∞ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è css –∫–ª–∞—Å—Å–æ–≤, —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ css-loader –≤ —Å—Ç–∞—Ä–æ–º –∫–æ–Ω—Ñ–∏–≥–µ Webpack. –ê –ø–æ—Å–ª–µ –ø–µ—Ä–µ–µ–∑–¥–∞ rsbuild –±—ã–ª–æ —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–µ –≤ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏. –ù–∞–ø—Ä–∏–º–µ—Ä, –≤ —Å—Ç–∞—Ä–æ–º –≤–∞—Ä–∏–∞–Ω—Ç–µ –±—ã–ª–æ `mySassFile__moduleName__a7a87304cd`, –∞ –≤ –Ω–æ–≤–æ–º ‚Äî `mySassFile__a7a87304cd`, –∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –±—ã–ª–æ –µ—â—ë –¥–æ–±–∞–≤–∏—Ç—å –≤ —ç—Ç–æ –≤ –ø–æ–ª–µ output.
```ts
export default defineConfig({
  source: {
    entry: {
      polyfill: 'core-js/es/object',
      main: ENTRY_POINT,
    },
    alias: {
      '@my-monorepo/ui/dist/main': path.resolve(
        __dirname,
        '../../node_modules/@my-monorepo/ui/dist/main.scss',
        //... –¥—Ä—É–≥–∏–µ –∏–º–ø–æ—Ä—Ç—ã –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω–æ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∑–∞—Ä–µ–∑–æ–ª–≤–∏—Ç—å –≤ –º–æ–Ω–æ—Ä–µ–ø–µ
    ),
    }
  },
   output: {
    cssModules: {
      localIdentName: '[1]__[local]___[hash:base64:5]',
      // `localIdentRegExp` is a css-loader option which is not documented by rsbuild but is actually used
      //@ts-ignore
      localIdentRegExp: /([^\/\\]+)\.module\.(css|scss)$/i,
    },
  },
  tools: {
        rspack(config, { appendPlugins, isDev, rspack }) {
            appendPlugins([
                new rspack.DefinePlugin({
                    'process.env': Object.assign({}, getDotEnv(), {
                        //... —Ç—É—Ç –∫—É—á–∞ env
                    }),
                }),
               new rspack.HtmlRspackPlugin({
                    template: path.join(__dirname, 'public', 'index.html'),
                    scriptLoading: 'blocking',
                    chunks: ['polyfill', 'main'],
                }),
              // –ö –º–æ–µ–º—É —É–¥–∏–≤–ª–µ–Ω–∏—é sentry-webpack-plugin
              //–í—Å—Ç–∞–ª –∫–∞–∫ –Ω–∞–¥–æ —Å –ø–µ—Ä–≤–æ–≥–æ —Ä–∞–∑–∞
              getSentryWebpackPlugin(), 
            ]);

            return config;
        },
        htmlPlugin: false, 
    },
  plugins: [pluginReact(), pluginSass()],
});
```
–ü—Ä–∏ —ç—Ç–æ–º localIdentRegExp –Ω–∏–≥–¥–µ –Ω–µ –±—ã–ª –∑–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω, –Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è –≤ —Å–∞–º–æ–º rsbuild ‚Äî –ø—Ä–∏—à–ª–æ—Å—å –∏–¥—Ç–∏ —Å–º–æ—Ç—Ä–µ—Ç—å –∏—Å—Ö–æ–¥–Ω–∏–∫–∏, —á—Ç–æ–±—ã —ç—Ç–æ –Ω–∞–π—Ç–∏. –ü—Ä–∏–º–µ—Ä–Ω–æ —Å —Ç–∞–∫–∏–º–∏ —Ñ–∏–Ω–∞–ª—å–Ω—ã–º –≤–∞—Ä–∏–∞–Ω—Ç–æ–º –∏ –ø–æ–ª—É—á–∏–ª–æ—Å—å –ø–µ—Ä–µ–µ—Ö–∞—Ç—å –Ω–∞ rsbuild.

### –í—ã–≤–æ–¥—ã
–ö–∞–∫ –∏—Ç–æ–≥, —Å–±–æ—Ä–∫–∞ –Ω–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ –≤ CI —Å—Ç–∞–ª–∞ –∑–∞–Ω–∏–º–∞—Ç—å –ø–æ—Ä—è–¥–∫–∞ –ø–æ–ª—É—Ç–æ—Ä–∞ –º–∏–Ω—É—Ç, –∞ —Ä–∞—Å—Ö–æ–¥ –ø–∞–º—è—Ç–∏ –Ω–µ –ø—Ä–µ–≤—ã—à–∞–ª 1.5GB. –¢–∞–∫ —á—Ç–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É—é –∏–º–µ–Ω–Ω–æ —ç—Ç–æ—Ç —Å–±–æ—Ä—â–∏–∫ –≤ –∫–µ–π—Å–∞—Ö, –∫–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–µ—Ö–∞—Ç—å —Å Webpack –Ω–∞ —á—Ç–æ-—Ç–æ –±–æ–ª–µ–µ –±—ã—Å—Ç—Ä–æ–µ, –Ω–æ –Ω–µ —Ö–æ—á–µ—Ç—Å—è –≤–æ–∑–∏—Ç—å—Å—è —Å –∫–æ–Ω—Ñ–∏–≥–æ–º –∏ –∏—Å–∫–∞—Ç—å –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã –ø–ª–∞–≥–∏–Ω–∞–º Webpack.
–ü–æ–¥–≤–µ–¥—É –∏—Ç–æ–≥, –ø–µ—Ä–µ–µ–∑–¥ —Å Webpack ‚Üí –≤ Rsbuild –∏ —Å–±–æ—Ä–∫–∞ –≤ CI
- –í—Ä–µ–º—è —Å–±–æ—Ä–∫–∏: 8 –º–∏–Ω ‚Üí 1.5 –º–∏–Ω 
- –ü–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏: 8GB ‚Üí 1.5GB 
- HMR (–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–æ–¥—É–ª–µ–π –≤ dev-—Å—Ä–µ–¥–µ –Ω–∞ MacBook M1 Pro Max): webpack (7 —Å–µ–∫—É–Ω–¥) vs rsbuild (1.2 —Å–µ–∫—É–Ω–¥—ã)
- Production build: 5 –º–∏–Ω—É—Ç ‚Üí 1.2 –º–∏–Ω—É—Ç—ã
- –ö–æ–ª-–≤–æ —Å—Ç—Ä–æ–∫ –≤ –∫–æ–Ω—Ñ–∏–≥–µ:  456 —Å—Ç—Ä–æ–∫ ‚Üí 135 —Å—Ç—Ä–æ–∫ üßπ

–¢–µ–ø–µ—Ä—å –Ω–∞—à–∞ –∫–æ–º–∞–Ω–¥–∞ —Ç—Ä–∞—Ç–∏—Ç –≤ 5 —Ä–∞–∑ –º–µ–Ω—å—à–µ –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ CI/CD –∏ —Ä–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –±—ã—Å—Ç—Ä–µ–µ –±–ª–∞–≥–æ–¥–∞—Ä—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–º—É HMR. –ï—Å–ª–∏ –≤–∞—à CI —Å—Ç—Ä–∞–¥–∞–µ—Ç –æ—Ç –¥–æ–ª–≥–∏—Ö –±–∏–ª–¥–æ–≤ –Ω–∞ Webpack, Rsbuild ‚Äî –≤–∞—à –±–∏–ª–µ—Ç –≤ –±—É–¥—É—â–µ–µ —Å–±–æ—Ä–∫–∏ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞.
